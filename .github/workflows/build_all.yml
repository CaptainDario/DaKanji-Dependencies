   
name: All - Test and build

# Controls when the workflow will run
on:

# Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
    inputs:
      TF_VERSION:
        description: 'Enter the tensorflow branch name on which the TF Lite binaries should be built.'
        required: true
        default: "r2.8"
      BUILD_OPTIONS:
        description: 'Enter the build options with which TF Lite binaries should be built.'
        required: false
        default: "-DTFLITE_ENABLE_XNNPACK=ON -DTFLITE_ENABLE_GPU=ON"

jobs:
  windows-build:
    uses: ./.github/workflows/build_windows.yaml
    with:
      TF_VERSION: TF_VERSION
      BUILD_OPTIONS: BUILD_OPTIONS

  linux-build:
    uses: ./.github/workflows/build_linux.yaml
    with:
      TF_VERSION: TF_VERSION
      BUILD_OPTIONS: BUILD_OPTIONS

  macos-build:
    uses: ./.github/workflows/build_macos.yaml
    with:
      TF_VERSION: TF_VERSION
      BUILD_OPTIONS: BUILD_OPTIONS
